<!-- HTML -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper ODIN</title>
</head>
<body>
    <div id="choiceAttack">
        <button class="rockBtn">Rock</button>
        <button class="paperBtn">Paper</button>
        <button class="sciButton">Scissors</button>
    </div>

    <div id="game-output">
        <p>Current round: 0</p>
    </div>
</body>
</html>

<script>

    const choiceButtons = document.querySelectorAll('#choiceAttack')

    let playerVictory = 5
    let robotVictory = 5

    //Paper > Rock > Scissors > Paper
    function playerWin() {
        robotVictory--;
        console.log("Player has won this round")
        console.log("Current Tally: " + playerVictory + " vs " + robotVictory)
    }

    function robotWin() {
        playerVictory--;
        console.log("Robot has won this round")
        console.log("Current Tally: " + playerVictory + " vs " + robotVictory)
    }

    function rockpaperOdin() {

        let chosenAttack;

        choiceButtons.forEach((choiceAttack) => {
            choiceAttack.addEventListener("click", () => {
                if (choiceAttack.classList.contains("rockBtn")) {
                    chosenAttack = "rock";
                } else if (choiceAttack.classList.contains("sciBtn")) {
                    chosenAttack = "scissors";
                } else {
                    chosenAttack = "paper";
                }

                const robotChoices = ["rock","paper","scissors"]
                let robotPlay = robotChoices[Math.floor(Math.random()*robotChoices.length)];

                console.log("The robot has chosen " + robotPlay)
        
                //Draw
                if (chosenAttack === robotPlay) {
                    console.log("A Draw!, Play again!")
                }

                //Rock
                if (chosenAttack === "rock" && robotPlay === "paper") {
                    console.log("Player has lost, Paper beats rock")
                    robotWin()
                } else if (chosenAttack === "rock" && robotPlay === "scissors") {
                    console.log("Player has won, Rock beats scissors")
                    playerWin()
                }
                
                //Paper
                if (chosenAttack === "paper" && robotPlay === "rock") {
                    console.log("Player has won, rock beats paper")
                    playerWin()
                } else if (chosenAttack === "paper" && robotPlay === "scissors") {
                    console.log("Player has lost, scissors beats paper")
                    robotWin()
                }

                //Scissors
                if (chosenAttack === "scissors" && robotPlay === "rock") {
                    console.log("Player has lost, rock beats scissors")
                    robotWin()
                } else if (chosenAttack === "scissors" && robotPlay === "paper") {
                    console.log("Player has won, scissors beats paper")
                    playerWin()
                }

                console.log(" ")
            });
        });
    }

    //Runs the rockpaperOdin function 5 times after the button is pushed
    function game() {
        for (let i = 0; i < 5; i++) {
            rockpaperOdin()
            console.log("")
        }

        if (playerVictory === robotVictory) {
            console.log("Nobody wins... go home")
        } else if (playerVictory > robotVictory) {
            console.log("Player wins... hooray")
        } else if (playerVictory < robotVictory) {
            console.log("Robot wins... stupid")
        }

        playerVictory = 0
        robotVictory = 0
    
    }

    rockpaperOdin()
</script>